<div class="header" *ngIf="!useYearSelector">
  <button [disabled]="!canNavigateBack" (click)="changeMonth(-1)">
    <kirby-icon name="arrow-back"></kirby-icon>
  </button>

  <div class="month-and-year">
    <span class="month">{{ activeMonthName }}</span
    ><span class="year">{{ activeYear }}</span>
  </div>

  <button [disabled]="!canNavigateForward" (click)="changeMonth(1)">
    <kirby-icon name="arrow-more"></kirby-icon>
  </button>
</div>

<div class="header-year-selector" *ngIf="useYearSelector">
  <div class="section-month">
    <button [disabled]="!canNavigateBack" (click)="changeMonth(-1)">
      <kirby-icon name="arrow-back"></kirby-icon>
    </button>
    <div class="month">
      {{ activeMonthName }}
    </div>
    <button [disabled]="!canNavigateForward" (click)="changeMonth(1)">
      <kirby-icon name="arrow-more"></kirby-icon>
    </button>
  </div>

  <div class="section-year">
    <div class="year">
      {{ activeYear }}
    </div>
    <button class="select-button" (click)="yearSelectorVisible = !yearSelectorVisible">
      <kirby-icon name="{{ !yearSelectorVisible ? 'arrow-down' : 'arrow-up' }}"></kirby-icon>
    </button>
  </div>
</div>

<kirby-year-selector
  *ngIf="yearSelectorVisible"
  [(activeYear)]="activeYear"
  minYear="{{ minDate }}"
  maxYear="{{ maxDate }}"
>
</kirby-year-selector>

<table class="calendar-table" *ngIf="!yearSelectorVisible">
  <thead class="calendar-table-header">
    <th *ngFor="let weekDay of weekDays">{{ weekDay }}</th>
  </thead>
  <tbody>
    <tr *ngFor="let week of month">
      <td *ngFor="let day of week">
        <div
          (click)="onDateSelected(day)"
          class="{{ day.cssClasses }}"
          [class.selected]="day.isSelected"
        >
          {{ day.date }}
        </div>
      </td>
    </tr>
  </tbody>
</table>

<!-- <iframe src="kirby/components/calendar/calendar.webview.html" #calendarContainer style="width: 320px; height: 304px; border: 0"> -->
